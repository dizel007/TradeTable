<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Модальное окно на JavaScript - Пример №4</title>
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      font-size: 19px;
      font-weight: 400;
      line-height: 1.5;
      color: #212529;
      text-align: left;
      background-color: #fff;
    }

    .modal__backdrop {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      z-index: -1;
      pointer-events: none;
      transition: opacity0 .2s ease-in;
      text-align: center;
    }

    .modal__content {
      position: relative;
      width: auto;
      margin: 10px;
      transition: opacity 0.3s ease-in;
      display: inline-flex;
      flex-direction: column;
      background-color: #fff;
      background-clip: padding-box;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 0.3rem;
      box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3);
    }

    @media (min-width: 576px) {
      .modal__content {
        max-width: 600px;
        margin: 50px auto;
      }
    }

    .modal__show .modal__backdrop,
    .modal__show .modal__content {
      opacity: 1;
      z-index: 1050;
      pointer-events: auto;
      overflow-y: auto;
    }

    .modal__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid #eceeef;
    }

    .modal__title {
      margin-top: 0;
      margin-bottom: 0;
      line-height: 1.5;
      font-size: 18px;
      font-weight: 500;
    }

    .modal__btn-close {
      float: right;
      font-family: sans-serif;
      font-size: 24px;
      font-weight: 700;
      line-height: 1;
      color: #000;
      text-shadow: 0 1px 0 #fff;
      opacity: 0.5;
      text-decoration: none;
    }

    .modal__btn-close:focus,
    .modal__btn-close:hover {
      color: #000;
      text-decoration: none;
      cursor: pointer;
      opacity: 0.75;
    }

    .modal__body {
      position: relative;
      display: flex;
      padding: 10px;
      overflow: auto;
    }

    .modal__footer {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 10px;
      border-top: 1px solid #e9ecef;
      border-bottom-right-radius: 0.3rem;
      border-bottom-left-radius: 0.3rem;
    }

    .btn {
      display: inline-block;
      font-weight: 400;
      color: #212529;
      text-align: center;
      vertical-align: middle;
      cursor: pointer;
      user-select: none;
      background-color: transparent;
      border: 1px solid transparent;
      padding: 4px 6px;
      font-size: 16px;
      line-height: 1.5;
      transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      border-radius: 4px;
    }

    .btn__delete {
      color: #fff;
      background-color: #dc3545;
      border-color: #dc3545;
    }

    .btn__cancel {
      color: #212529;
      background-color: #f8f9fa;
      border-color: #f8f9fa;
      margin-left: 10px;
    }

    .btn__delete:hover {
      color: #fff;
      background-color: #c82333;
      border-color: #bd2130;
    }

    .btn__cancel:hover {
      color: #212529;
      background-color: #e2e6ea;
      border-color: #dae0e5;
    }


    .img__items {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      padding-top:10px;
      padding-bottom: 10px;
    }

    .img__items>div {
      flex: 0 0 50%;
      padding: 10px;
    }

    .img__items img {
      max-width: 100%;
      height: auto;
      border-radius: 5px;
    }    

    .img__items img:hover {
      filter: grayscale(1);
      cursor: pointer;
    }
  </style>
</head>

<body>


  <div class="img__items">
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="22500" data-name="Audi A5 Coupé">
    </div>
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="28000" data-name="Volkswagen Golf">
    </div>
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="19990" data-name="KIA XCeed">
    </div>
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="21300" data-name="Jaguar F-Type">
    </div>
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="30500" data-name="Chevrolet Corvette">
    </div>
    <div class="img__item">
      <img src="/icons/table/lamp.jpg" alt="" data-price="25000" data-name="Audi A3 Sportback">
    </div>
  </div>

  <script>

    // полифилл CustomEven для IE11
    (function () {
      if (typeof window.CustomEvent === "function") return false;
      function CustomEvent(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: null };
        var evt = document.createEvent('CustomEvent');
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      window.CustomEvent = CustomEvent;
    })();

    $modal = function (options) {
      var
        _elemModal,
        _eventShowModal,
        _eventHideModal,
        _hiding = false,
        _destroyed = false,
        _animationSpeed = 200;

      function _createModal(options) {
        var
          elemModal = document.createElement('div'),
          modalTemplate = '<div class="modal__backdrop" data-dismiss="modal"><div class="modal__content"><div class="modal__header"><div class="modal__title" data-modal="title">{{title}}</div><span class="modal__btn-close" data-dismiss="modal" title="Закрыть">×</span></div><div class="modal__body" data-modal="content">{{content}}</div>{{footer}}</div></div>',
          modalFooterTemplate = '<div class="modal__footer">{{buttons}}</div>',
          modalButtonTemplate = '<button type="button" class="{{button_class}}" data-handler={{button_handler}}>{{button_text}}</button>',
          modalHTML,
          modalFooterHTML = '';

        elemModal.classList.add('modal');
        modalHTML = modalTemplate.replace('{{title}}', options.title || 'Новое окно');
        modalHTML = modalHTML.replace('{{content}}', options.content || '');
        if (options.footerButtons) {
          for (var i = 0, length = options.footerButtons.length; i < length; i++) {
            var modalFooterButton = modalButtonTemplate.replace('{{button_class}}', options.footerButtons[i].class);
            modalFooterButton = modalFooterButton.replace('{{button_handler}}', options.footerButtons[i].handler);
            modalFooterButton = modalFooterButton.replace('{{button_text}}', options.footerButtons[i].text);
            modalFooterHTML += modalFooterButton;
          }
          modalFooterHTML = modalFooterTemplate.replace('{{buttons}}', modalFooterHTML);
        }
        modalHTML = modalHTML.replace('{{footer}}', modalFooterHTML);
        elemModal.innerHTML = modalHTML;
        document.body.appendChild(elemModal);
        return elemModal;
      }

      function _showModal() {
        if (!_destroyed && !_hiding) {
          _elemModal.classList.add('modal__show');
          document.dispatchEvent(_eventShowModal);
        }
      }

      function _hideModal() {
        _hiding = true;
        _elemModal.classList.remove('modal__show');
        _elemModal.classList.add('modal__hiding');
        setTimeout(function () {
          _elemModal.classList.remove('modal__hiding');
          _hiding = false;
        }, _animationSpeed);
        document.dispatchEvent(_eventHideModal);
      }

      function _handlerCloseModal(e) {
        if (e.target.dataset.dismiss === 'modal') {
          _hideModal();
        }
      }

      _elemModal = _createModal(options || {});


      _elemModal.addEventListener('click', _handlerCloseModal);
      _eventShowModal = new CustomEvent('show.modal', { detail: _elemModal });
      _eventHideModal = new CustomEvent('hide.modal', { detail: _elemModal });

      return {
        show: _showModal,
        hide: _hideModal,
        destroy: function () {
          _elemModal.parentElement.removeChild(_elemModal),
            _elemModal.removeEventListener('click', _handlerCloseModal),
            destroyed = true;
        },
        setContent: function (html) {
          _elemModal.querySelector('[data-modal="content"]').innerHTML = html;
        },
        setTitle: function (text) {
          _elemModal.querySelector('[data-modal="title"]').innerHTML = text;
        }
      }
    };

    (function () {
      var elemTarget;
      // создаём модальное окно
      var modal = $modal({
        title: 'Просмотр изображения',
        content: '<img src="" alt="" style="display: block; height: auto; max-width: 100%;">',
        footerButtons: [
          { class: 'btn btn__delete', text: 'Удалить', handler: 'modalHandlerDelete' },
          { class: 'btn btn__cancel', text: 'Закрыть', handler: 'modalHandlerCancel' }
        ]
      });
      // при клике на документ
      document.addEventListener('click', function (e) {
      
      
        // если мы кликнули на измобржение расположенное в .img__items, то...
        if (e.target.matches('.img__items img')) {
          elemTarget = e.target;
          // устанавливаем модальному окну title
          modal.setContent('<div style="flex: 1 0 60%;"><img src="' + e.target.src + '" alt="' + e.target.alt + '" style="display: block; height: auto; max-width: 100%; margin: 0 auto;"></div><div style="flex: 1 0 40%;"><div style="font-size: 18px; font-weight:bold;">' + e.target.dataset.name + '</div>Цена:<br><b>' + e.target.dataset.price + '$</b></div>');
          modal.show();
        } else if (e.target.dataset.handler === 'modalHandlerCancel') {
          modal.hide();
        } else if (e.target.dataset.handler === 'modalHandlerDelete') {
          elemTarget.parentElement.parentElement.removeChild(elemTarget.parentElement);
          modal.hide();
        }
      });
    })();
  </script>

</body>

</html>	